drop table App if exists;
drop table Caze if exists;
drop table Comment if exists;
drop table Diary if exists;
drop table DiaryEntry if exists;
drop table Doctor if exists;
drop table Goal if exists;
drop table GoalTracker if exists;
drop table Patient if exists;
drop table Patient_Doctor if exists;
drop table Patient_Relative if exists;
drop table Relative if exists;
drop table User if exists;
create table App (id bigint generated by default as identity, lastModified timestamp not null, name varchar(255), caze_id bigint, primary key (id));
create table Caze (id bigint generated by default as identity, lastModified timestamp not null, fromDate timestamp, note varchar(255), toDate timestamp, patient_id bigint, primary key (id));
create table Comment (id bigint generated by default as identity, lastModified timestamp not null, commentText varchar(255), time timestamp, creator_id bigint, diaryEntry_id bigint, primary key (id));
create table Diary (id bigint not null, primary key (id));
create table DiaryEntry (id bigint generated by default as identity, lastModified timestamp not null, entryText varchar(255), patientRead boolean not null, relativeRead boolean not null, time timestamp, title varchar(255), creator_id bigint, diary_id bigint, primary key (id));
create table Doctor (id bigint not null, primary key (id));
create table Goal (id bigint generated by default as identity, lastModified timestamp not null, created timestamp, dueTo timestamp, goal varchar(255), state integer, creator_id bigint, goalTracker_id bigint, primary key (id));
create table GoalTracker (id bigint not null, primary key (id));
create table Patient (id bigint not null, primary key (id));
create table Patient_Doctor (patient_id bigint not null, doctor_id bigint not null)
create table Patient_Relative (patient_id bigint not null, relative_id bigint not null)
create table Relative (id bigint not null, primary key (id));
create table User (id bigint generated by default as identity, lastModified timestamp not null, dateOfBirth date not null, email varchar(255) not null, name varchar(255) not null, passwordHash varchar(255) not null, salt varchar(255) not null, surname varchar(255) not null, primary key (id));
alter table User add constraint UK_e6gkqunxajvyxl5uctpl2vl2p unique (email);
alter table App add constraint FKjp54la8kiu52t7ujhv5wt5d9u foreign key (caze_id) references Caze;
alter table Caze add constraint FK6diecfu2if8gcd9ukvg87lyvk foreign key (patient_id) references Patient;
alter table Comment add constraint FK9hrxmb03fjiwhpx0tgcxdt3sp foreign key (creator_id) references User;
alter table Comment add constraint FK2phwffy093i08leipppxs8f7y foreign key (diaryEntry_id) references DiaryEntry;
alter table Diary add constraint FK6yo286ht6gjl4s4k57e2pbstv foreign key (id) references App;
alter table DiaryEntry add constraint FK6b9jpv8jcuiwrghy3l6kuik2v foreign key (creator_id) references User;
alter table DiaryEntry add constraint FK6tqamye2rjdxfx3g2qtg2lrsk foreign key (diary_id) references Diary;
alter table Doctor add constraint FKgdtbumj2jvdpw49umasnl8cyv foreign key (id) references User;
alter table Goal add constraint FK9omovrcqye5rwowswgrmo8woo foreign key (creator_id) references User;
alter table Goal add constraint FKka1qyx8cry4u50wjyfpc2yv89 foreign key (goalTracker_id) references GoalTracker;
alter table GoalTracker add constraint FK3spnqussdtct5xmxke2nk710w foreign key (id) references App;
alter table Patient add constraint FK6k0lye53f1emmkcnddxk4xxhp foreign key (id) references User;
alter table Patient_Doctor add constraint FKcmdix6uf2sos3x87mjyork4es foreign key (doctor_id) references Doctor;
alter table Patient_Doctor add constraint FKs9ncs2skqt3peu34we4vjnp66 foreign key (patient_id) references Patient;
alter table Patient_Relative add constraint FK7h3uht3bg4jfu8t80cwqhmouw foreign key (relative_id) references Relative;
alter table Patient_Relative add constraint FKcudm8k0iqrpaq1d1tvhgjmh6f foreign key (patient_id) references Patient;
alter table Relative add constraint FK8xqibchdelep6p7n68kjddn9p foreign key (id) references User;